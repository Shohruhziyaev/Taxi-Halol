<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8">
  <title>Haydovchini Ro'yxatdan O'tkazish</title>
</head>
<body>
  <h2>Haydovchi ro'yxatga olish formasi</h2>

  <form id="driverForm">
    <label>F.I.Sh:</label><br>
    <input type="text" name="fullName" required><br><br>

    <label>Telefon raqam:</label><br>
    <input type="text" name="phone" required><br><br>

    <label>Avtomobil markasi va raqami:</label><br>
    <input type="text" name="carInfo" required><br><br>

    <label>Pasport rasmi havolasi:</label><br>
    <input type="text" name="passportLink"><br><br>

    <label>Guvohnoma rasmi havolasi:</label><br>
    <input type="text" name="licenseLink"><br><br>

    <label>Izoh:</label><br>
    <textarea name="comment"></textarea><br><br>

    <button type="submit">Yuborish</button>
  </form>

  <p id="status"></p>

  <script>
    /* === Telegram ma’lumotlari === */
    const botToken = "7998740549:AAGn2JCaB2iDphZdrjKtQ5Lb2cdSjqJYbmA";
    const chatId   = "-1002502563618";   // kanalingiz ID’si

    /* === Forma yuborilganda === */
    document.getElementById("driverForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const f = e.target;
      const msg = `
🚖 <b>Yangi haydovchi ro'yxatdan o'tdi</b>
👤 Ism: <b>${f.fullName.value}</b>
📞 Tel: <b>${f.phone.value}</b>
🚗 Avto: <b>${f.carInfo.value}</b>
🆔 Pasport: ${f.passportLink.value || '—'}
🪪 Guvohnoma: ${f.licenseLink.value || '—'}
📝 Izoh: ${f.comment.value || '—'}
      `;

      try {
        const r = await fetch(
          https://api.telegram.org/bot${botToken}/sendMessage,
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              chat_id: chatId,
              text: msg,
              parse_mode: "HTML"
            })
          }
        );

        if (await r.json()) {
          document.getElementById("status").textContent =
            "✅ Maʼlumot kanalga yuborildi!";
          f.reset();
        }
      } catch (err) {
        document.getElementById("status").textContent =
          "❌ Xatolik: xabar yuborilmadi";
        console.error(err);
      }
    });
  </script>
</body>
</html>
